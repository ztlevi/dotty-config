#!/usr/bin/env zsh

case $(_os) in
  macos)
    local default_browser=$(plutil -p ~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist | grep 'https' -b3 | awk 'NR==3 {split($4, arr, "\""); print arr[2]}')
    case $default_browser in
      *chrome) open -a "/Applications/Google Chrome.app" $@ ;;
      *firefox) open -a "/Applications/Firefox.app" $@ ;;
      *safari) open -a "/Applications/Safari.app" $@ ;;
    esac
    ;;
  linux-*)
    local default_browser=$(xdg-settings get default-web-browser)
    xdg-open $@
    ;;
esac
